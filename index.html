<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<meta name="description" content="カルネージハートエクサのチームデータビューワー「CHE Viwer JS」。javascript製です。">
		<meta name="keywords" content="CHE Viewer JS,カルネージハートエクサ,ツール,CHE">
		<meta name="format-detection" content="telephone=no,address=no,email=no">
		<title>CHE Viewer JS</title>
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/CHE.css">
	</head>
	<body>
		<div id="wrap">
			<header>
				<h1>CHE Viewer JS</a></h1>
				<div class="titleContainer">
					<h2>Carnage Heart EXA - CHE Viewer JS TestVer.</h2>
					<p>カルネージハートエクサ - CHE Viewer JS テスト版</p>
				</div>
				<p class="bannerContainer">
					<a href="http://www.artdink.co.jp/japanese/title/che/"><img class="banner" alt="カルネージハートエクサ公式" src="http://www.artdink.co.jp/japanese/title/che/img/sp_banner01.jpg"/></a>
					<a href="http://satloke.jp/"><img class="banner" alt="SATLOKE" src="satloke.png"></a></p>
				<p style="clear: both;">CHEファイルをドラッグ＆ドロップすると内容を画像にして表示してくれるよ。※非公開のものは表示されません。<br>
					現在チームデータのみ対応。マッチデータには未対応。<br>
					生成した画像は保存して自由に使ってください。</p>
				<p>まだテスト版。自分の目標とする仕様にすら到達していませんが、最低限の物ができたので試験公開。まだ表示が間違ってるところが残ってるかも。</p>
				<p>IE11, Chrome, Firefox, Operaで動作確認しています。※IE10以下では動作しません。</p>
			</header>
			<article>
				<p><canvas id="offscreen" width="32" height="32" style="background: #000;"></canvas></p>
				<div id="information">
					<div>
						<p id="teamInformation"><img id="teamEmb" width="32" height="32"/> チーム名：<span id="teamName"></span> Owner：<span id="teamOwner"></span></p>
						<div id="machineInformations">
							<div class="machineInformation" id="machine0">
								<div class="leftColumn">
									<p class="emblem"><img id="OKE1Emb" width="32" height="32"/></p>
									<p class="snapshot"><img id="OKE1SS" width="48" height="48"/></p>
								</div>
								<div class="rightColumn">
									<p class="name">機体名：<span id="OKE1Name"></span></p>
									<p class="secretary">機体タイプ：<span id="OKE1MachineType"></span></p>
									<p class="secretary">非公開：<span id="OKE1Secretary"></span></p>
									<p class="secretary">CPU：<span id="OKE1CpuType"></span></p>
								</div>
							</div>
							<div class="machineInformation" id="machine1">
								<div class="leftColumn">
									<p class="emblem"><img id="OKE2Emb" width="32" height="32"/></p>
									<p class="snapshot"><img id="OKE2SS" width="48" height="48"/></p>
								</div>
								<div class="rightColumn">
									<p class="name">機体名：<span id="OKE2Name"></span></p>
									<p class="secretary">機体タイプ：<span id="OKE2MachineType"></span></p>
									<p class="secretary">非公開：<span id="OKE2Secretary"></span></p>
									<p class="secretary">CPU：<span id="OKE2CpuType"></span></p>
								</div>
							</div>
							<div class="machineInformation" id="machine2">
								<div class="leftColumn">
									<p class="emblem"><img id="OKE3Emb" width="32" height="32"/></p>
									<p class="snapshot"><img id="OKE3SS" width="48" height="48"/></p>
								</div>
								<div class="rightColumn">
									<p class="name">機体名：<span id="OKE3Name"></span></p>
									<p class="secretary">機体タイプ：<span id="OKE3MachineType"></span></p>
									<p class="secretary">非公開：<span id="OKE3Secretary"></span></p>
									<p class="secretary">CPU：<span id="OKE3CpuType"></span></p>
								</div>
							</div>
						</div>
					</div>
					<div id="counterNameContainer">
						<h3>カウンタ名:未実装</h3>
						<form id="counterName">
							<ol>
								<li><input id="CNT0" type="text" value="CNT-A" disabled/></li>
								<li><input id="CNT1" type="text" value="CNT-B" disabled/></li>
								<li><input id="CNT2" type="text" value="CNT-C" disabled/></li>
								<li><input id="CNT3" type="text" value="CNT-D" disabled/></li>
								<li><input id="CNT4" type="text" value="CNT-E" disabled/></li>
								<li><input id="CNT5" type="text" value="CNT-F" disabled/></li>
								<li><input id="CNT6" type="text" value="CNT-G" disabled/></li>
								<li><input id="CNT7" type="text" value="CNT-H" disabled/></li>
							</ol>
						</form>
					</div>
				</div>
				<div>
					<form>
						<!--
						<input type="button" onclick="" value="1/2">
						<input type="button" onclick="" value="3/4">
						<input type="button" onclick="" value="原寸大">
						-->
					</form>
					<div id="routineContainer">
						<!--<p><canvas id="canvas0" width="1280" height="1280">図形を表示するには、canvasタグをサポートしたブラウザが必要です。</canvas></p>
						<p><canvas id="canvas1" width="640" height="640">図形を表示するには、canvasタグをサポートしたブラウザが必要です。</canvas></p>
						<p><canvas id="canvas2" width="640" height="640">図形を表示するには、canvasタグをサポートしたブラウザが必要です。</canvas></p>-->
						<p><img id="routine0"/></p>
						<p><img id="routine1"/></p>
						<p><img id="routine2"/></p>
					</div>

					<h3>未実装</h3>
					<ul>
						<li>選択中の機体をハイライト</li>
						<li>非表示の場合×の表示を</li>
						<li>空白の機体を選択できないように</li>
						<li>EXEファイル読み込み時に2,3機体目を空白に</li>
						<li>武装等チーム情報・OKE情報の表示</li>
						<li>チップの詳細表示</li>
						<li>表示の拡大縮小</li>
						<li>62 ジャンプ, の矢印の調整表示位置</li>
						<li>範囲外の数値が来た時の対応</li>
					</ul>

					<h3>盛り込みたい機能</h3>
					<ul>
						<li>無駄な描画＆toDataURLを省く</li>
						<li>CHEマッチデータ入力</li>
						<li>ちゃんとしたバージョン管理</li>
						<li>ソースの公開はすべきか否か考え中、ライセンスの明記</li>
						<li>キャンバスの拡大縮小</li>
						<li>サブルーチン縦横表示切り替え</li>
						<li>本体を編集可能なCanvasにして、画像出力ボタンを別途用意</li>
						<li>編集可能なエリア分けレイヤーを用意して、プログラムを見やすく</li>
						<li>EXEファイル出力 (できれば機体ハード情報も格納できるよう拡張)</li>
						<li>チップの編集機能</li>
					</ul>

					<h3>お世話になったツール・ライブラリ</h3>
					<ul>
						<li><a href="http://carnageez.web.fc2.com/">そこにカルネージがあった</a> <a href="http://carnageez.web.fc2.com/catdir/cat.html#ExaTool">EXE</a> - 開発初期は出力txtファイルを使用、後もCHEファイル解析の参考に</li>
						<li>その他、先人のCHEファイル解析の労力に感謝</li>
					</ul>
					<ul>
						<li><a href="http://www.drk7.jp/MT/archives/001324.html">ecl_new.js</a> - javascriptでの文字コード変換ライブラリの改造版 (元ライブラリ: <a href="http://www.vector.co.jp/soft/other/java/se342855.html">Escape Codec Library</a>)</li>
						<li><a href="https://github.com/typekit/webfontloader">WebFontLoader</a> - webfontの読み込みに関するライブラリ、fontの読み込みタイミングの取得に使用</li>
					</ul>
					<ul>
						<li><a href="http://hp.vector.co.jp/authors/VA049605/">地平線に行く</a> <a href="http://hp.vector.co.jp/authors/VA049605/http_server_anywhere.html">HTTP Server Anywhere</a> - ローカルサーバー、ローカル環境での動作確認に使用</li>
						<li><a href="http://closure-compiler.appspot.com/home">Closure Compiler</a> - Javascriptのminifyに使用</li>
						<li><a href="http://hide.maruo.co.jp/software/hidemaru.html">秀丸エディタ</a> - 初期～中期の開発に</li>
						<li><a href="http://www.sublimetext.com/">Sublime Text 2</a> - 規模が大きくなってきたので採用</li>
						<li><a href="http://www.jslint.com/">JSLint</a> - javascriptのデバッグに</li>
						<li><a href="http://www.google.com/intl/ja/chrome/browser/">Google Chrome</a> - 表示確認・コンソールとして</li>
						<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript">MozillaDeveloperNetwork</a>他、HTML5,javascriptに関する各種Webサイト、個人ブログ。</li>
					</ul>
					<ul>
						<li><a href="http://www.pentacom.jp/pentacom/">pentacom</a> <a href="http://www.pentacom.jp/pentacom/bitfontmaker2/">BitFontMaker2</a> - フォントの作成</li>
						<li><a href="http://www.geocities.jp/meir000/fontforge/">unofficial fontforge-cygwin</a> - フォントの編集、BitFontMaker2で作成したフォントの調整に使用</li>
						<li><a href="http://www.vector.co.jp/soft/win95/util/se079072.html">Stirling</a> - CHEファイルのバイナリの解析に</li>
						<li><a href="http://www.adobe.com/jp/">Adobe</a> <a href="http://www.adobe.com/jp/products/photoshop-elements.html">Photoshop Elements 7</a> - 画像編集</li>
						<li><a href="http://www.adobe.com/jp/">Adobe</a> <a href="http://www.adobe.com/jp/products/illustrator.edu.html">Illustrator CS4</a> - 画像編集</li>
					</ul>

					<!-- デバッグ用 start -->
					<form id="exedata_outer">
						<h3>EXEテキスト</h3>
						<input type="button" value="解析" onClick="CHE()"/>
						<textarea id="exedata">
begin Exe
reg_name CNT-A CNT-B CNT-C CNT-D CNT-E CNT-F CNT-G CNT-H reg_end
1 1 1
main 0 1 1 0 11 2 -1 0
main 0 2 1 0 12 2 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 3 1 0 13 2 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 4 1 0 14 2 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 5 1 0 15 2 -1 1 1 0 0 0 0 0 0 0 0 0
main 0 6 1 0 16 2 -1 1 1 9 1 1 23 45 67 0 0 0
main 0 7 1 0 21 2 -1 1 1 0 0 0 0 0 0 0 0 0
main 0 8 1 0 22 2 -1 1 1 0 0 0 0 0 0 0 0 0
main 0 9 1 0 23 2 -1 2 0 0 0 0 0 0 0 0 0 0
main 0 10 1 0 24 0 2 1 1 1 0 0 0 0 0 0 0 0
main 0 11 1 0 25 0 2 2 68 68 21 -10 0 0 0 0 0 0
main 0 12 1 0 26 0 2 1 0 90 50 0 1 6 1 1 0 0
main 0 13 1 0 31 0 2 1 -90 30 15 0 30 1 0 0 0 0
main 0 14 1 0 32 0 2 1 0 360 13 0 9 1 1 0 0 0
main 0 15 1 0 33 0 4 1 80 2 0 0 0 0 0 0 0 0
main 0 1 2 0 56 4 -1 3 0 2 0 0 0 0 0 0 0 0
main 0 2 2 0 55 6 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 3 2 0 54 0 6 1 15 1 0 0 0 0 0 0 0 0
main 0 4 2 0 53 0 6 1 1 1 1 2 1 1 1 1 2 1
main 0 5 2 0 52 0 6 1 3 9 0 9 87 65 43 0 0 0
main 0 6 2 0 51 0 6 4 0 0 0 0 0 0 0 0 0 0
main 0 7 2 0 46 0 6 1 1 0 0 0 0 0 0 0 0 0
main 0 8 2 0 45 0 6 1 0 0 0 0 0 0 0 0 0 0
main 0 9 2 0 44 0 6 0 0 0 0 0 0 0 0 0 0 0
main 0 10 2 0 43 0 6 1 0 0 0 0 0 0 0 0 0 0
main 0 11 2 0 42 0 6 1 0 90 50 0 1 0 0 0 0 0
main 0 12 2 0 41 0 6 1 0 360 52 0 0 0 0 0 0 0
main 0 13 2 0 36 0 6 1 1 1 0 0 0 0 0 0 0 0
main 0 14 2 0 35 0 6 50 0 0 0 0 0 0 0 0 0 0
main 0 15 2 0 34 2 6 1 0 0 0 0 0 0 0 0 0 0
main 0 1 3 0 61 2 -1 2 0 2 0 0 0 0 0 0 0 0
main 0 2 3 0 62 2 -1 3 2 0 0 0 0 0 0 0 0 0
main 0 3 3 0 63 2 -1 3 1 0 0 0 0 0 0 0 0 0
main 0 4 3 0 64 2 -1 2 1 0 0 0 0 0 0 0 0 0
main 0 5 3 0 65 2 -1 4 1 0 0 0 0 0 0 0 0 0
main 0 6 3 0 66 2 -1 1 5 2 0 0 0 0 0 0 0 0
main 0 7 3 0 71 2 -1 2 1 0 0 0 0 0 0 0 0 0
main 0 8 3 0 72 2 -1 1 0 90 50 0 1 1 1 1 0 0
main 0 9 3 0 73 2 -1 0 60 1 1 1 0 0 0 0 0 0
main 0 10 3 0 74 2 -1 1 7 8 0 0 0 0 0 0 0 0
main 0 11 3 0 75 2 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 12 3 0 76 2 -1 1 0.0 0.0 0 0 0 0 0 0 0 0
main 0 13 3 0 81 2 -1 3 3 3 2 0 0 0 0 0 0 0
main 0 14 3 0 82 2 -1 3 100 0 0 0 0 0 0 0 0 0
main 0 15 3 0 83 4 -1 2 0 0 0 0 0 0 0 0 0 0
main 0 8 4 0 1 -1 -1 0
main 0 9 4 0 94 6 -1 2 5 5 0 0 0 0 0 0 0 0
main 0 10 4 0 93 6 -1 1 1 0 0 0 0 0 0 0 0 0
main 0 11 4 0 92 6 -1 0
main 0 12 4 0 91 6 -1 5 0 0 0 0 0 0 0 0 0 0
main 0 13 4 0 86 6 -1 1 0 0 0 0 0 0 0 0 0 0
main 0 14 4 0 85 6 -1 0 30 110 0 2 0 0 0 0 0 0
main 0 15 4 0 84 6 -1 1 0 360 110 0 3 1 7 0 0 0
sub1 0 1 1 0 1 -1 -1 0
sub2 0 1 1 0 1 -1 -1 0
main 0 1 6 0 62 2 -1 1 2 0 0 0 0 0 0 0 0 0
main 0 2 6 0 62 2 -1 2 2 0 0 0 0 0 0 0 0 0
main 0 3 6 0 62 2 -1 3 2 0 0 0 0 0 0 0 0 0
main 0 4 6 0 62 2 -1 4 2 0 0 0 0 0 0 0 0 0
main 0 5 6 0 62 2 -1 5 2 0 0 0 0 0 0 0 0 0
main 0 6 6 0 62 2 -1 6 2 0 0 0 0 0 0 0 0 0
main 0 7 6 0 62 2 -1 7 2 0 0 0 0 0 0 0 0 0
main 0 8 6 0 62 2 -1 8 2 0 0 0 0 0 0 0 0 0
main 0 9 6 0 62 2 -1 9 2 0 0 0 0 0 0 0 0 0
end Exe
</textarea>
					</form>
					<!-- デバッグ用 end -->
				</div>
				<p>このページにはカルネージハートエクサのキャプチャ画像を編集したものを使用しています。<br>
					また、プログラムチップのアイコン・フォントはキャプチャ画像からトレースしたものを使用しています。</p>
			</article>
			<footer>
				<p><small>&copy; copyright 2013 HAC foked by Project Europa</small></p>
				<p>
					<script language="javascript" type="text/javascript">
var upDate=new Date();

var time = Date.parse(document.lastModified);
time = time - (upDate.getTimezoneOffset() * 60 * 1000);

upDate.setTime(time);

var year = upDate.getFullYear();
var month = upDate.getMonth()+1;
var day = upDate.getDate();
var hour = upDate.getHours();
var minute = upDate.getMinutes();
var second = upDate.getSeconds();

if (month < 10) {month = "0" + month;}
if (day < 10) {day = "0" + day;}
if (hour < 10) {hour = "0" + hour;}
if (minute < 10) {minute = "0" + minute;}
if (second < 10) {second = "0" + second;}
document.write("Last Updated: ", year, "/", month, "/", day, " ", hour, ":", minute, ":", second, "（UTC+9:00）");
					</script>
				</p>
			</footer>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
		<script src="js/ecl_new.js"></script>
		<script src="js/CHE_original.js"></script>
	</body>
</html>
